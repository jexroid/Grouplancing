let whiteThemed=!0,isPulsing=!1,isTextInputVisible=!0,turnedOn=!1,firstTimeUsingTheApp=!0;document.addEventListener("DOMContentLoaded",function(){//! timer
let e=document.querySelector(".timer"),t=!1,n;function i(e){return e.toString().padStart(2,"0")}let a=document.querySelector(".overlay"),d=document.getElementById("setone"),l=!1;d.addEventListener("click",function(){!1==l?(a.classList.add("active"),l=!0):!0==l&&(a.classList.remove("active"),l=!1)});let s=document.getElementById("exit-btn"),r=document.getElementById("minimize-btn"),c=document.getElementById("btn1"),o=document.getElementById("vorod"),u=document.getElementById("ip"),v=document.getElementById("port"),m=document.getElementById("username"),$=document.getElementById("password"),p=document.getElementById("warning-msg"),L=document.getElementById("error-msg"),E=document.getElementById("es-circle"),g=document.getElementById("radio1"),y=document.getElementById("radio2"),f=document.getElementById("version"),I=document.getElementById("close-button"),_=document.getElementById("restart-button"),h=document.getElementById("notification"),T=document.querySelector(".image-container"),B=document.getElementById("connect"),k=/^(([01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}([01]?\d{1,2}|2[0-4]\d|25[0-5])$/;s.addEventListener("click",function(){window.WindowInteractApi.close()}),r.addEventListener("click",function(){window.WindowInteractApi.min()}),g.disabled=!0,y.disabled=!0,window.api.LoadCredentials().then(e=>{!1!=e&&(u.value=e.host,v.value=e.port,m.value=e.username,$.value=e.password)}),g.addEventListener("click",()=>{window.api.makeSshTunnel(1)}),y.addEventListener("click",()=>{window.api.makeSshTunnel(0),window.api.openBrowser()}),c.addEventListener("click",function(){window.api.LoadCredentials().then(a=>{if(!1==a)console.log("data is not entered"),T.classList.toggle("notclick"),B.innerHTML="Please Fill the Data",setTimeout(()=>{T.classList.remove("notclick"),B.innerHTML="Connect Now"},3e3);else{if(t)t=!1,e.style.opacity=0,e.style.pointerEvents="none",clearInterval(n);else{let d;d=0,n=setInterval(function(){var t;d++;let n=(t=d,`${i(Math.floor(t/3600))}:${i(Math.floor(t%3600/60))}:${i(t%60)}`);e.textContent=n},1e3),t=!0,e.style.opacity=1,e.style.pointerEvents="auto"}T.classList.toggle("clicked"),!1==turnedOn?(turnedOn=!0,B.innerHTML="Connected!",g.disabled=!1,y.disabled=!1):(turnedOn=!1,B.innerHTML="Connect Now",g.disabled=!0,y.disabled=!0,g.checked=!1,y.checked=!1,window.api.makeSshTunnel(0))}})}),o.addEventListener("click",()=>{switch(!0){case""===u.value||""===v.value||""===m.value||""===$.value:L.classList.add("active"),setTimeout(()=>{L.classList.remove("active")},6e3);break;case!k.test(u.value):E.innerHTML="آیپی وارد شده معتبر نیست",L.classList.add("active"),setTimeout(()=>{L.classList.remove("active")},6e3);break;default:o.innerHTML="اطلاعات ثبت شد",!1===firstTimeUsingTheApp&&p.classList.add("active"),firstTimeUsingTheApp=!1,setTimeout(()=>{o.innerHTML="ورود",p.classList.remove("active")},6e3),window.api.credentials(u.value.trim(),Number(v.value.trim()),m.value.trim(),$.value.trim())}}),u.addEventListener("contextmenu",function(e){e.preventDefault(),navigator.clipboard.readText().then(function(e){u.value=e})}),v.addEventListener("contextmenu",function(e){e.preventDefault(),navigator.clipboard.readText().then(function(e){v.value=e})}),m.addEventListener("contextmenu",function(e){e.preventDefault(),navigator.clipboard.readText().then(function(e){m.value=e})}),$.addEventListener("contextmenu",function(e){e.preventDefault(),navigator.clipboard.readText().then(function(e){$.value=e})});(async()=>await window.WindowInteractApi.ver())().then(e=>{f.innerHTML="v"+e}),I.addEventListener("click",()=>{h.classList.add("hidden")}),_.addEventListener("click",()=>{window.WindowInteractApi.restart()}),f.addEventListener("click",()=>{window.WindowInteractApi.openURLInBrowser("https://github.com/jexroid/group")})});